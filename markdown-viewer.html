<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Markdown Viewer</title>
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
		<style>
			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
					sans-serif;
				line-height: 1.6;
				max-width: 800px;
				margin: 0 auto;
				padding: 20px;
				background-color: #f8f9fa;
			}
			.container {
				background: white;
				padding: 40px;
				border-radius: 8px;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			}
			h1,
			h2,
			h3,
			h4,
			h5,
			h6 {
				color: #333;
				border-bottom: 2px solid #e1e4e8;
				padding-bottom: 10px;
			}
			code {
				background-color: #f6f8fa;
				padding: 2px 4px;
				border-radius: 3px;
				font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo,
					monospace;
			}
			pre {
				background-color: #f6f8fa;
				padding: 16px;
				border-radius: 6px;
				overflow-x: auto;
			}
			pre code {
				background: none;
				padding: 0;
			}
			blockquote {
				border-left: 4px solid #dfe2e5;
				padding-left: 16px;
				color: #6a737d;
				margin: 0;
			}
			table {
				border-collapse: collapse;
				width: 100%;
				margin: 16px 0;
			}
			th,
			td {
				border: 1px solid #dfe2e5;
				padding: 8px 12px;
				text-align: left;
			}
			th {
				background-color: #f6f8fa;
				font-weight: 600;
			}
			.checkbox {
				margin-right: 8px;
			}
			.file-selector {
				margin-bottom: 20px;
				padding: 10px;
				background: #f1f3f4;
				border-radius: 4px;
			}
			select {
				padding: 8px;
				border-radius: 4px;
				border: 1px solid #ddd;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="file-selector">
				<label for="fileSelect">Markdownファイルを選択:</label>
				<select id="fileSelect">
					<option value="PRACTICELIST.md">PRACTICELIST.md</option>
					<option value="PRACTICETEMPLATE.md">PRACTICETEMPLATE.md</option>
					<option value="README.md">README.md</option>
				</select>
			</div>
			<div id="content"></div>
		</div>

		<script>
			// チェックボックスをクリック可能にする
			marked.setOptions({
				breaks: true,
				gfm: true,
			});

			// カスタムレンダラーでチェックボックスを処理
			const renderer = new marked.Renderer();
			const originalCheckbox = renderer.checkbox;

			renderer.checkbox = function (checked) {
				const disabled = checked ? "disabled" : "";
				const checkedAttr = checked ? "checked" : "";
				return `<input type="checkbox" class="checkbox" ${checkedAttr} ${disabled} onclick="return false;">`;
			};

			marked.use({ renderer });

			async function loadMarkdown(filename) {
				try {
					const response = await fetch(filename);
					const text = await response.text();
					document.getElementById("content").innerHTML = marked.parse(text);
				} catch (error) {
					document.getElementById(
						"content"
					).innerHTML = `<p>エラー: ${filename} を読み込めませんでした。</p>`;
				}
			}

			// ファイル選択時の処理
			document
				.getElementById("fileSelect")
				.addEventListener("change", function () {
					loadMarkdown(this.value);
				});

			// 初期読み込み
			loadMarkdown("PRACTICELIST.md");
		</script>
	</body>
</html>
